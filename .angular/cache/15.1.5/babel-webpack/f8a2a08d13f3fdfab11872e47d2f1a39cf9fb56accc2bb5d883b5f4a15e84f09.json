{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Subject, takeUntil } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../core/services\";\nimport * as i2 from \"../../../core/services/cookie.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../../core/services/project.service\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/progress-spinner\";\nconst _c0 = [\"password\"];\nfunction LoginComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \"User with this Email already exists! Please sign in.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \"Email required!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \"Please enter Email in correct format!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \"Password required!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Please enter Password with min 6 symbol!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Submit\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_mat_spinner_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\", 14);\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"diameter\", ctx_r7.diameter);\n  }\n}\nexport class LoginComponent {\n  constructor(authService, cookieService, router, route, projectsService) {\n    this.authService = authService;\n    this.cookieService = cookieService;\n    this.router = router;\n    this.route = route;\n    this.projectsService = projectsService;\n    this.form = new FormGroup({\n      email: new FormControl('', [Validators.required, Validators.email]),\n      password: new FormControl('', [Validators.required, Validators.minLength(4)])\n    });\n    this.sub$ = new Subject();\n    this.isRegistered = false;\n    this.mobile = false;\n    this.spinner = false;\n    this.diameter = 30;\n    this.projects = [];\n  }\n  ngOnInit() {\n    window.innerWidth <= 1024 ? this.mobile = true : this.mobile = false;\n    this.getProjects();\n  }\n  ngAfterViewInit() {\n    this.route.queryParamMap.subscribe(params => {\n      params.get('email') && !params.get('fromRegistration') ? (this.form.get('email')?.setValue(params.get('email')), this.isRegistered = true) : null;\n    });\n    this.isRegistered ? this.password.nativeElement.focus() : null;\n  }\n  submit() {\n    this.form.markAllAsTouched();\n    if (this.form.invalid) return;\n    this.spinner = true;\n    this.authService.login(this.form.value).pipe(takeUntil(this.sub$)).subscribe(res => {\n      this.getProjects();\n      if (this.projects.length > 0) {\n        this.router.navigate(['/main/projects']);\n      } else {\n        this.router.navigate(['/stepper']);\n      }\n    });\n  }\n  getProjects() {\n    this.projectsService.getProjects().subscribe({\n      next: res => res.data.forEach(project => {\n        this.projects.push(project);\n      }),\n      error: err => console.log(err)\n    });\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.CookieService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.ProjectService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  viewQuery: function LoginComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.password = _t.first);\n    }\n  },\n  decls: 22,\n  vars: 9,\n  consts: [[\"onclick\", \"onclick\", 1, \"container\", 3, \"ngClass\"], [1, \"top\"], [1, \"bottom\"], [1, \"center\"], [3, \"formGroup\", \"ngSubmit\"], [\"class\", \"validationMessage\", 4, \"ngIf\"], [\"type\", \"email\", \"placeholder\", \"email\", \"id\", \"email\", \"formControlName\", \"email\", 1, \"inputs\"], [\"type\", \"password\", \"placeholder\", \"password\", \"id\", \"password\", \"formControlName\", \"password\", 1, \"inputs\"], [\"password\", \"\"], [4, \"ngIf\"], [\"type\", \"submit\", 1, \"inputs\", \"subBtn\"], [\"class\", \"spinner\", \"color\", \"accent\", 3, \"diameter\", 4, \"ngIf\"], [\"routerLink\", \"/register\"], [1, \"validationMessage\"], [\"color\", \"accent\", 1, \"spinner\", 3, \"diameter\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"div\", 1)(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"div\", 3)(4, \"h2\");\n      i0.ɵɵtext(5, \"Please Sign In\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"form\", 4);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_6_listener() {\n        return ctx.submit();\n      });\n      i0.ɵɵtemplate(7, LoginComponent_div_7_Template, 2, 0, \"div\", 5);\n      i0.ɵɵelement(8, \"input\", 6);\n      i0.ɵɵtemplate(9, LoginComponent_div_9_Template, 2, 0, \"div\", 5);\n      i0.ɵɵtemplate(10, LoginComponent_div_10_Template, 2, 0, \"div\", 5);\n      i0.ɵɵelement(11, \"input\", 7, 8);\n      i0.ɵɵtemplate(13, LoginComponent_div_13_Template, 2, 0, \"div\", 5);\n      i0.ɵɵtemplate(14, LoginComponent_div_14_Template, 2, 0, \"div\", 9);\n      i0.ɵɵelementStart(15, \"button\", 10);\n      i0.ɵɵtemplate(16, LoginComponent_span_16_Template, 2, 0, \"span\", 9);\n      i0.ɵɵtemplate(17, LoginComponent_mat_spinner_17_Template, 1, 1, \"mat-spinner\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"h4\");\n      i0.ɵɵtext(19, \"Don't have an account? \");\n      i0.ɵɵelementStart(20, \"a\", 12);\n      i0.ɵɵtext(21, \" Register\");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      let tmp_3_0;\n      let tmp_4_0;\n      let tmp_5_0;\n      let tmp_6_0;\n      i0.ɵɵproperty(\"ngClass\", ctx.mobile ? \"mobile\" : \"\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isRegistered);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.form.get(\"email\")) == null ? null : tmp_3_0.getError(\"required\")) && ((tmp_3_0 = ctx.form.get(\"email\")) == null ? null : tmp_3_0.touched));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx.form.get(\"email\")) == null ? null : tmp_4_0.getError(\"email\")) && ((tmp_4_0 = ctx.form.get(\"email\")) == null ? null : tmp_4_0.touched));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx.form.get(\"password\")) == null ? null : tmp_5_0.getError(\"required\")) && ((tmp_5_0 = ctx.form.get(\"password\")) == null ? null : tmp_5_0.touched));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_6_0 = ctx.form.get(\"password\")) == null ? null : tmp_6_0.getError(\"minlength\")) && ((tmp_6_0 = ctx.form.get(\"password\")) == null ? null : tmp_6_0.touched));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.spinner);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.spinner);\n    }\n  },\n  dependencies: [i3.RouterLink, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName, i6.NgIf, i6.NgClass, i7.MatProgressSpinner],\n  styles: [\"@import\\\"https://fonts.googleapis.com/css?family=Raleway:400,700\\\";*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}body[_ngcontent-%COMP%]{min-height:100vh;font-family:Raleway,sans-serif}.container[_ngcontent-%COMP%]{font-family:Raleway,sans-serif;position:fixed;width:100%;height:100%;overflow:hidden;left:0;top:0}.container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]:before, .container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]:after, .container[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]:before, .container[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]:after{content:\\\"\\\";position:fixed;width:200vmax;height:200vmax;background:#7B68EE;top:50%;left:50%;margin-top:-100vmax;transform-origin:0 50%;transition:all .5s cubic-bezier(.445,.05,0,1);z-index:10;opacity:.65;transition-delay:.2s}.container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]:after{transform:rotate(135deg)}.container[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]:before{transform:rotate(-45deg)}.container[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]:after{transform:rotate(-135deg)}.container[_ngcontent-%COMP%]:hover   .top[_ngcontent-%COMP%]:before, .container[_ngcontent-%COMP%]:hover   .top[_ngcontent-%COMP%]:after, .container[_ngcontent-%COMP%]:hover   .bottom[_ngcontent-%COMP%]:before, .container[_ngcontent-%COMP%]:hover   .bottom[_ngcontent-%COMP%]:after, .container[_ngcontent-%COMP%]:active   .top[_ngcontent-%COMP%]:before, .container[_ngcontent-%COMP%]:active   .top[_ngcontent-%COMP%]:after, .container[_ngcontent-%COMP%]:active   .bottom[_ngcontent-%COMP%]:before, .container[_ngcontent-%COMP%]:active   .bottom[_ngcontent-%COMP%]:after{margin-left:200px;transform-origin:-200px 50%;transition-delay:0s}.container[_ngcontent-%COMP%]:hover   .center[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]:active   .center[_ngcontent-%COMP%]{opacity:1;transition-delay:.2s}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{position:fixed;width:400px;height:400px;top:calc(50% - 200px);left:calc(50% - 200px);display:flex;flex-direction:column;justify-content:center;align-items:center;opacity:0;transition:all .5s cubic-bezier(.445,.05,0,1);transition-delay:0s;color:#333}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]{width:300px;padding:15px;margin:5px 0;border-radius:5px;border:1px solid #ccc;font-family:inherit}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .validationMessage[_ngcontent-%COMP%]{color:red;font-size:1rem;align-self:flex-start}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .subBtn[_ngcontent-%COMP%]{display:flex;width:300px;padding:15px;align-items:center;justify-content:center;margin:5px 0;border-radius:5px;border:1px solid #ccc;font-family:inherit;background:#7B68EE;color:#fff;font-weight:700;cursor:pointer;transition:all .5s cubic-bezier(.445,.05,0,1)}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .subBtn[_ngcontent-%COMP%]:hover{background:#fff;color:#7b68ee}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:15px;color:#7b68ee;text-align:center}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#7b68ee;text-decoration:none;margin-left:5px;font-size:17px}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.container.mobile[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]:before, .container.mobile[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]:after, .container.mobile[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]:before, .container.mobile[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]:after{margin-left:200px;transform-origin:-200px 50%;transition-delay:.5s}.container.mobile[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{opacity:1;transition-delay:1s}@media only screen and (max-width: 940px){.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .validationMessage[_ngcontent-%COMP%]{font-size:.8rem}}@media only screen and (max-width: 700px){.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]{padding:10px 15px;margin:3px 0}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .validationMessage[_ngcontent-%COMP%]{font-size:.7rem}}@media only screen and (max-width: 420px){.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]{padding:15px;margin:10px 0}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .validationMessage[_ngcontent-%COMP%]{font-size:.9rem}}@media only screen and (max-width: 280px){.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]{width:240px;padding:15px 5px}}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}