{"ast":null,"code":"import { Subject, takeUntil } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/project.service\";\nimport * as i2 from \"../../facades/project-facade.service\";\nimport * as i3 from \"../../core/services/board.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../home/navigation/navigation.component\";\nimport * as i7 from \"@angular/forms\";\nconst _c0 = [\"project\"];\nfunction DashboardComponent_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const project_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", project_r4.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", project_r4.name, \" \");\n  }\n}\nconst _c1 = function (a1) {\n  return [\"/dashboard\", a1];\n};\nfunction DashboardComponent_li_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const board_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c1, board_r5.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(board_r5.name);\n  }\n}\nfunction DashboardComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\");\n    i0.ɵɵtext(2, \"Dashboard\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"Choose a board from the sidebar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"router-outlet\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class DashboardComponent {\n  constructor(projectService, projectFacade, boardService, route) {\n    this.projectService = projectService;\n    this.projectFacade = projectFacade;\n    this.boardService = boardService;\n    this.route = route;\n    this.scrolledTop = false;\n    this.scrolled = true;\n    this.projects = [];\n    this.projects$ = this.projectService.getAllProjects();\n    this.currentProject = this.projectFacade.getProject();\n    this.sub$ = new Subject();\n    this.boards$ = this.boardService.getBoardss();\n    this.boardId = null;\n  }\n  ngOnInit() {\n    this.route.params.subscribe(params => {\n      if (params['id']) {\n        this.boardId = +params['id'];\n      } else {\n        this.boardId = null;\n      }\n    });\n    this.getMyProjects();\n  }\n  getMyProjects() {\n    this.projectFacade.getMyProjects$().pipe(takeUntil(this.sub$)).subscribe();\n  }\n  ngAfterViewInit() {\n    this.project.nativeElement.addEventListener('scroll', () => {\n      let firstElPos = this.project.nativeElement.firstChild.getBoundingClientRect().top;\n      firstElPos <= -10 ? this.scrolled = true : this.scrolled = false;\n      firstElPos <= -window.innerHeight ? this.scrolledTop = true : this.scrolledTop = false;\n    });\n  }\n  selectedProject(projectId) {\n    this.projectFacade.setProjectId(projectId);\n    setTimeout(() => {\n      location.reload();\n    }, 6000);\n  }\n}\nDashboardComponent.ɵfac = function DashboardComponent_Factory(t) {\n  return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.ProjectService), i0.ɵɵdirectiveInject(i2.ProjectFacade), i0.ɵɵdirectiveInject(i3.BoardService), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n};\nDashboardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DashboardComponent,\n  selectors: [[\"app-dashboard\"]],\n  viewQuery: function DashboardComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.project = _t.first);\n    }\n  },\n  decls: 16,\n  vars: 9,\n  consts: [[1, \"navigation\"], [\"project\", \"\"], [3, \"scrolled\"], [1, \"projectList\"], [1, \"select\", 3, \"ngModel\", \"ngModelChange\"], [\"selected\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"container\"], [1, \"sidebar\"], [4, \"ngFor\", \"ngForOf\"], [1, \"content\"], [4, \"ngIf\"], [3, \"value\"], [3, \"routerLink\"]],\n  template: function DashboardComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0, 1);\n      i0.ɵɵelement(2, \"app-navigation\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵtext(4, \" Select Project:\");\n      i0.ɵɵelementStart(5, \"select\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_select_ngModelChange_5_listener($event) {\n        return ctx.selectedProject($event);\n      });\n      i0.ɵɵelement(6, \"option\", 5);\n      i0.ɵɵtemplate(7, DashboardComponent_option_7_Template, 2, 2, \"option\", 6);\n      i0.ɵɵpipe(8, \"async\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"div\", 7)(10, \"div\", 8)(11, \"ul\");\n      i0.ɵɵtemplate(12, DashboardComponent_li_12_Template, 3, 4, \"li\", 9);\n      i0.ɵɵpipe(13, \"async\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"div\", 10);\n      i0.ɵɵtemplate(15, DashboardComponent_div_15_Template, 6, 0, \"div\", 11);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"scrolled\", ctx.scrolled);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.currentProject == null ? null : ctx.currentProject.id);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(8, 5, ctx.projects$));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(13, 7, ctx.boards$));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", !ctx.boardId);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i4.RouterOutlet, i4.RouterLink, i6.NavigationComponent, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.SelectControlValueAccessor, i7.NgControlStatus, i7.NgModel, i5.AsyncPipe],\n  styles: [\".navigation[_ngcontent-%COMP%]{min-height:13%;min-width:100%;background-color:#7a1de0}.projectList[_ngcontent-%COMP%]{margin-top:4%;text-align:center;font-size:1.5em;border-bottom:2px solid #7a1de0;padding-bottom:1%}.select[_ngcontent-%COMP%]{width:25%;height:100%;border-radius:5px;align-items:center;justify-content:center;margin:0 auto;text-align:center;font-size:20px}.select[_ngcontent-%COMP%]:hover{background-color:#efebeb}.container[_ngcontent-%COMP%]{display:flex;margin:20px;gap:20px}.content[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;text-align:center;font-size:1.5em;padding-bottom:1%;background-color:#efeeee;border-radius:5px;box-shadow:0 0 10px #0003}.sidebar[_ngcontent-%COMP%]{flex:0 0 300px;display:flex;flex-direction:column;gap:20px;border-radius:5px;background-color:#efeeee;box-shadow:0 0 10px #0003}li[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{text-decoration:none;list-style:none}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}