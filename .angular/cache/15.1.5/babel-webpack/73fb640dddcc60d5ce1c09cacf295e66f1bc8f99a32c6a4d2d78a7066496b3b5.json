{"ast":null,"code":"import { switchMap } from 'rxjs';\nimport { currentProject } from \"../../store/rxProject/project.selectors\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/facades/project-facade.service\";\nimport * as i2 from \"@ngrx/store\";\nexport class ProjectInterceptor {\n  constructor(projectFacade, store) {\n    this.projectFacade = projectFacade;\n    this.store = store;\n  }\n  intercept(request, next) {\n    return this.store.select(currentProject).pipe(switchMap(project => {\n      if (project) {\n        request = request.clone({\n          setHeaders: {\n            'project': project.id.toString()\n          }\n        });\n      }\n      // const project = this.projectFacade.getProject();\n      //\n      //\n      // if (project) {\n      //     return next.handle(\n      //         request.clone({\n      //             setHeaders: {project: String(project.id)}\n      //         })\n      //     );\n      // }\n      return next.handle(request);\n    }));\n  }\n}\nProjectInterceptor.ɵfac = function ProjectInterceptor_Factory(t) {\n  return new (t || ProjectInterceptor)(i0.ɵɵinject(i1.ProjectFacade), i0.ɵɵinject(i2.Store));\n};\nProjectInterceptor.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ProjectInterceptor,\n  factory: ProjectInterceptor.ɵfac\n});","map":{"version":3,"mappings":"AAOA,SAAoBA,SAAS,QAAO,MAAM;AAK1C,SAAQC,cAAc,QAAO,yCAAyC;;;;AAGtE,OAAM,MAAOC,kBAAkB;EAC3BC,YACYC,aAA4B,EACnBC,KAA6C;IADtD,kBAAa,GAAbD,aAAa;IACJ,UAAK,GAALC,KAAK;EAE1B;EAEAC,SAAS,CACLC,OAA6B,EAC7BC,IAAiB;IAEjB,OAAO,IAAI,CAACH,KAAK,CAACI,MAAM,CAACR,cAAc,CAAC,CACnCS,IAAI,CACDV,SAAS,CAAEW,OAAO,IAAI;MAClB,IAAIA,OAAO,EAAE;QACTJ,OAAO,GAAGA,OAAO,CAACK,KAAK,CAAC;UACpBC,UAAU,EAAE;YACR,SAAS,EAAEF,OAAO,CAACG,EAAE,CAACC,QAAQ;;SAIrC,CAAC;;MAElB;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEA,OAAOP,IAAI,CAACQ,MAAM,CAACT,OAAO,CAAC;IAC/B,CAAC,CAAC,CAAC;EACP;;AApCaL,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;SAAlBA,kBAAkB;EAAAe,SAAlBf,kBAAkB;AAAA","names":["switchMap","currentProject","ProjectInterceptor","constructor","projectFacade","store","intercept","request","next","select","pipe","project","clone","setHeaders","id","toString","handle","factory"],"sourceRoot":"","sources":["/Users/macbookpro/Desktop/GitHubRepo/Task-Manager-with-NgRx/src/app/core/interceptors/project.interceptor.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\nimport {\n    HttpRequest,\n    HttpHandler,\n    HttpEvent,\n    HttpInterceptor,\n} from '@angular/common/http';\nimport {Observable, switchMap} from 'rxjs';\nimport {ProjectFacade} from 'src/app/facades/project-facade.service';\nimport {AuthInterceptor} from \"./auth.interceptor\";\nimport {Store} from \"@ngrx/store\";\nimport {ProjectStateModule} from \"../../store\";\nimport {currentProject} from \"../../store/rxProject/project.selectors\";\n\n@Injectable()\nexport class ProjectInterceptor implements HttpInterceptor {\n    constructor(\n        private projectFacade: ProjectFacade,\n        private readonly store: Store<{ project: ProjectStateModule }>,\n        ) {\n    }\n\n    intercept(\n        request: HttpRequest<unknown>,\n        next: HttpHandler\n    ): Observable<HttpEvent<unknown>> {\n        return this.store.select(currentProject)\n            .pipe(\n                switchMap((project) => {\n                    if (project) {\n                        request = request.clone({\n                            setHeaders: {\n                                'project': project.id.toString()\n                            }\n\n\n                        });\n                    }\n        // const project = this.projectFacade.getProject();\n        //\n        //\n        // if (project) {\n        //     return next.handle(\n        //         request.clone({\n        //             setHeaders: {project: String(project.id)}\n        //         })\n        //     );\n        // }\n\n        return next.handle(request);\n    }));\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}