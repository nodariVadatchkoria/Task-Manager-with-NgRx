{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { MatTableDataSource } from \"@angular/material/table\";\nimport { of, Subject, switchMap, takeUntil } from \"rxjs\";\nimport { ConfirmDeleteComponent } from \"../../../../shared/confirm-delete/confirm-delete.component\";\nimport { UserRoleComponent } from \"../user-role/user-role.component\";\nimport { UserAddEditComponent } from \"../user-add-edit/user-add-edit.component\";\nlet UsersComponent = class UsersComponent {\n  constructor(store, userService, dialog) {\n    this.store = store;\n    this.userService = userService;\n    this.dialog = dialog;\n    this.displayedColumns = ['id', 'fullName', 'createdAt', 'actions'];\n    this.dataSource = new MatTableDataSource();\n    this.sub$ = new Subject();\n    this.pageIndex = 1;\n    this.total = 0;\n    this.pageSize = 10;\n  }\n  ngOnInit() {\n    this.getUsers();\n  }\n  getUsers() {\n    this.userService.getUsers({\n      page: this.pageIndex,\n      limit: this.pageSize\n    }).subscribe(users => {\n      this.dataSource.data = users.data;\n      this.total = users.totalCount;\n    });\n  }\n  addUser(id) {\n    const dialogRef = this.dialog.open(UserAddEditComponent, {\n      data: {\n        userId: id\n      }\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.getUsers();\n      }\n    });\n  }\n  delete(id) {\n    const dialogRef = this.dialog.open(ConfirmDeleteComponent);\n    dialogRef.afterClosed().pipe(takeUntil(this.sub$), switchMap(result => {\n      if (result) {\n        return this.userService.deleteUserById(id);\n      }\n      return of(null);\n    })).subscribe(result => {\n      if (result) {\n        this.getUsers();\n      }\n    });\n  }\n  pageEvent($event) {\n    this.pageIndex = $event.pageIndex + 1;\n    this.pageSize = $event.pageSize;\n    this.getUsers();\n  }\n  setRole(user) {\n    const dialogRef = this.dialog.open(UserRoleComponent, {\n      data: {\n        user: user\n      }\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.getUsers();\n      }\n    });\n  }\n};\nUsersComponent = __decorate([Component({\n  selector: 'app-users',\n  templateUrl: './users.component.html',\n  styleUrls: ['./users.component.scss']\n})], UsersComponent);\nexport { UsersComponent };","map":{"version":3,"mappings":"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","names":["Component","MatTableDataSource","of","Subject","switchMap","takeUntil","ConfirmDeleteComponent","UserRoleComponent","UserAddEditComponent","UsersComponent","constructor","store","userService","dialog","ngOnInit","getUsers","page","pageIndex","limit","pageSize","subscribe","users","dataSource","data","total","totalCount","addUser","id","dialogRef","open","userId","afterClosed","result","delete","pipe","sub$","deleteUserById","pageEvent","$event","setRole","user","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/Users/macbookpro/Desktop/GitHubRepo/Task-Manager-with-NgRx/src/app/pages/user/components/users/users.component.ts"],"sourcesContent":["import {Component, OnInit} from '@angular/core';\nimport {MatTableDataSource} from \"@angular/material/table\";\nimport {of, Subject, switchMap, takeUntil} from \"rxjs\";\nimport {User} from \"../../../../core/interfaces\";\nimport {UsersService} from \"../../../../core/services/users.service\";\nimport {MatDialog} from \"@angular/material/dialog\";\nimport {ConfirmDeleteComponent} from \"../../../../shared/confirm-delete/confirm-delete.component\";\nimport {PageEvent} from \"@angular/material/paginator\";\nimport {UserRoleComponent} from \"../user-role/user-role.component\";\nimport {UserAddEditComponent} from \"../user-add-edit/user-add-edit.component\";\n\n\n@Component({\n  selector: 'app-users',\n  templateUrl: './users.component.html',\n  styleUrls: ['./users.component.scss']\n})\nexport class UsersComponent implements OnInit{\n  displayedColumns = ['id', 'fullName', 'createdAt', 'actions'];\n\n  dataSource = new MatTableDataSource<User>();\n\n  sub$ = new Subject();\n  pageIndex  = 1;\n  total = 0;\n  pageSize = 10;\n\n  constructor(\n      private store: Store,\n    private userService: UsersService,\n    public dialog: MatDialog\n  ) {\n  }\n\n  ngOnInit() {\n    this.getUsers();\n  }\n\n  getUsers() {\n    this.userService.getUsers({\n      page: this.pageIndex,\n      limit: this.pageSize\n    })\n      .subscribe(users => {\n        this.dataSource.data = users.data;\n\n        this.total = users.totalCount;\n      });\n  }\n\n\n  addUser(id?: number) {\n    const dialogRef = this.dialog.open(UserAddEditComponent, {\n      data: {\n        userId: id\n      }\n    });\n\n\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.getUsers();\n      }\n    })\n\n  }\n\n  delete(id: number) {\n    const dialogRef = this.dialog.open(ConfirmDeleteComponent);\n\n    dialogRef.afterClosed()\n      .pipe(\n        takeUntil(this.sub$),\n        switchMap((result) => {\n          if (result) {\n            return this.userService.deleteUserById(id);\n          }\n          return of(null);\n        })\n      )\n      .subscribe(result => {\n        if (result) {\n          this.getUsers();\n        }\n      });\n  }\n\n  pageEvent($event: PageEvent) {\n    this.pageIndex = $event.pageIndex + 1;\n    this.pageSize = $event.pageSize;\n    this.getUsers()\n  }\n\n  setRole(user: User) {\n    const dialogRef = this.dialog.open(UserRoleComponent, {\n      data: {\n        user: user,\n      }\n    });\n\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.getUsers();\n      }\n    })\n  }\n}\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}