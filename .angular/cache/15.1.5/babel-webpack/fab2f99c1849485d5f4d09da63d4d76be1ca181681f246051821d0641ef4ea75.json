{"ast":null,"code":"import { TaskAddEditComponent } from \"../../../shared/task-add-edit/task-add-edit.component\";\nimport * as _ from 'lodash';\nimport { moveItemInArray, transferArrayItem } from \"@angular/cdk/drag-drop\";\nimport { ConfirmDeleteComponent } from \"../../../shared/confirm-delete/confirm-delete.component\";\nimport { of, Subject, switchMap, takeUntil } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../core/services/board.service\";\nimport * as i3 from \"../../../core/services/project.service\";\nimport * as i4 from \"../../../core/services/task.service\";\nimport * as i5 from \"@angular/material/dialog\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/cdk/drag-drop\";\nfunction BoardComponent_div_4_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 17);\n  }\n}\nfunction BoardComponent_div_4_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtemplate(1, BoardComponent_div_4_div_5_div_1_Template, 1, 0, \"div\", 13);\n    i0.ɵɵelementStart(2, \"h4\", 14);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 15);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function BoardComponent_div_4_div_5_Template_button_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const task_r3 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.deleteTask(task_r3.id));\n    });\n    i0.ɵɵtext(7, \"delete\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const task_r3 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(task_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(task_r3.description);\n  }\n}\nconst _c0 = function () {\n  return [];\n};\nfunction BoardComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵlistener(\"cdkDropListDropped\", function BoardComponent_div_4_Template_div_cdkDropListDropped_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const column_r1 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.drop($event, column_r1));\n    });\n    i0.ɵɵelementStart(1, \"div\", 5)(2, \"div\", 6)(3, \"p\", 7);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, BoardComponent_div_4_div_5_Template, 8, 2, \"div\", 8);\n    i0.ɵɵelementStart(6, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function BoardComponent_div_4_Template_button_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const column_r1 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.addTask(column_r1));\n    });\n    i0.ɵɵelementStart(7, \"span\", 10);\n    i0.ɵɵtext(8, \"add\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\", 11);\n    i0.ɵɵtext(10, \"Add Task\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const column_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"cdkDropListData\", ctx_r0.tasks[column_r1.id] || i0.ɵɵpureFunction0(3, _c0));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(column_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.tasks[column_r1.id] || i0.ɵɵpureFunction0(4, _c0));\n  }\n}\nexport class BoardComponent {\n  constructor(route, boardService, projectService, taskService, dialog) {\n    this.route = route;\n    this.boardService = boardService;\n    this.projectService = projectService;\n    this.taskService = taskService;\n    this.dialog = dialog;\n    this.sub$ = new Subject();\n    this.board = {};\n    this.tasks = {};\n    this.projectName = this.projectService.projectName;\n  }\n  ngOnInit() {\n    this.route.params.subscribe(params => {\n      console.log(params);\n      if (params) {\n        this.boardId = +params['id'];\n        this.boardService.getBoardByID(params['id'], params['projectId']).subscribe(res => {\n          this.board = res;\n          console.log(this.board);\n        });\n        console.log(params['id']);\n      }\n    });\n  }\n  ngAfterViewInit() {\n    this.getTasks();\n  }\n  // fetchTasks() {\n  //   this.taskService.getTasks({boardId: this.boardId})\n  //     .subscribe(tasks => {\n  //       this.tasks = tasks;\n  //     })\n  // }\n  addTask(column) {\n    const dialogRef = this.dialog.open(TaskAddEditComponent, {\n      width: '600px',\n      data: {\n        boardId: this.boardId,\n        column: column\n      }\n    });\n    dialogRef.afterClosed().subscribe(task => {\n      if (task) {\n        this.getTasks();\n      }\n    });\n  }\n  getTasks() {\n    this.taskService.getTasks({\n      boardId: this.boardId\n    }).subscribe(tasks => {\n      this.tasks = _.groupBy(tasks, 'boardColumnId');\n      console.log(tasks);\n    });\n  }\n  drop(event, column) {\n    console.log(event.container);\n    if (event.previousContainer === event.container) {\n      moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\n    } else {\n      transferArrayItem(event.previousContainer.data, event.container.data, event.previousIndex, event.currentIndex);\n      const tasks = event.container.data.map((task, index) => {\n        return {\n          ...task,\n          taskStatus: column.taskStatus,\n          boardColumnId: column.id\n        };\n      });\n      this.tasks[column.id] = tasks;\n      const currentTask = tasks[event.currentIndex];\n      console.log(currentTask);\n      this.taskService.updateTask(currentTask.id, currentTask).subscribe(task => {\n        console.log(task);\n        this.getTasks();\n      });\n    }\n  }\n  deleteTask(id) {\n    const dialogRef = this.dialog.open(ConfirmDeleteComponent);\n    dialogRef.afterClosed().pipe(takeUntil(this.sub$), switchMap(result => {\n      if (result) {\n        return this.taskService.deleteTask(id);\n      }\n      return of(null);\n    })).subscribe(result => {\n      if (result) {\n        this.getTasks();\n      }\n    });\n  }\n  ngOnDestroy() {\n    this.sub$.next(null);\n    this.sub$.complete();\n  }\n}\nBoardComponent.ɵfac = function BoardComponent_Factory(t) {\n  return new (t || BoardComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.BoardService), i0.ɵɵdirectiveInject(i3.ProjectService), i0.ɵɵdirectiveInject(i4.TaskService), i0.ɵɵdirectiveInject(i5.MatDialog));\n};\nBoardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BoardComponent,\n  selectors: [[\"app-board\"]],\n  decls: 5,\n  vars: 2,\n  consts: [[1, \"head\"], [1, \"name\"], [\"cdkDropListGroup\", \"\", 1, \"display\"], [\"class\", \"column-container\", \"cdkDropList\", \"\", 3, \"cdkDropListData\", \"cdkDropListDropped\", 4, \"ngFor\", \"ngForOf\"], [\"cdkDropList\", \"\", 1, \"column-container\", 3, \"cdkDropListData\", \"cdkDropListDropped\"], [1, \"column\"], [1, \"col-header\"], [1, \"col-name\"], [\"class\", \"task\", \"cdkDrag\", \"\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"add-task\", 3, \"click\"], [1, \"material-icons\"], [1, \"p-add\"], [\"cdkDrag\", \"\", 1, \"task\"], [\"class\", \"placeholder\", 4, \"cdkDragPlaceholder\"], [1, \"title\"], [1, \"desc\"], [1, \"material-icons\", \"btn-delete\", 3, \"click\"], [1, \"placeholder\"]],\n  template: function BoardComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"p\", 1);\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵtemplate(4, BoardComponent_div_4_Template, 11, 5, \"div\", 3);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.projectName);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.board.columns);\n    }\n  },\n  dependencies: [i6.NgForOf, i7.CdkDropListGroup, i7.CdkDropList, i7.CdkDrag],\n  styles: [\".head[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 67px;\\n  background-color: #e9ecef;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: -1;\\n}\\n\\n.name[_ngcontent-%COMP%] {\\n  font-size: 1.4rem;\\n  color: #676060;\\n  margin-left: 10%;\\n  margin-top: 20px;\\n}\\n\\n.col-name[_ngcontent-%COMP%] {\\n  margin-top: 10px;\\n}\\n\\n.col-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  margin-left: 10px;\\n  margin-right: 10px;\\n}\\n\\n.prog-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  gap: 150px;\\n  margin-left: 10px;\\n  margin-right: 10px;\\n}\\n\\n.column[_ngcontent-%COMP%] {\\n  width: 300px;\\n  min-height: 100px;\\n  background-color: #e9ecef;\\n  border-radius: 3px;\\n}\\n\\n.dots[_ngcontent-%COMP%] {\\n  color: #a39696;\\n  margin-top: 10px;\\n  width: 30px;\\n  height: 30px;\\n  justify-content: center;\\n  align-content: center;\\n  align-items: center;\\n}\\n\\n.dots-container[_ngcontent-%COMP%] {\\n  width: 30px;\\n  height: 30px;\\n  border-radius: 50%;\\n  display: flex;\\n}\\n\\n.dots-container[_ngcontent-%COMP%]:hover {\\n  cursor: pointer;\\n  background-color: #dee2e6;\\n}\\n\\n.add-task[_ngcontent-%COMP%] {\\n  width: 35%;\\n  height: 35px;\\n  display: flex;\\n  gap: 5px;\\n  margin: 30px 10px 10px;\\n  align-content: center;\\n  border-radius: 5px;\\n  justify-content: center;\\n  align-items: center;\\n  border: none;\\n}\\n\\n.p-add[_ngcontent-%COMP%] {\\n  margin-top: 10px;\\n}\\n\\n.desc[_ngcontent-%COMP%] {\\n  margin-left: 5px;\\n  margin-right: 5px;\\n}\\n\\n.add-task[_ngcontent-%COMP%]:hover {\\n  cursor: pointer;\\n  background-color: #dee2e6;\\n}\\n\\n.task[_ngcontent-%COMP%] {\\n  margin-left: auto;\\n  margin-right: auto;\\n  border-radius: 5px;\\n  width: 280px;\\n  min-height: 40px;\\n  background-color: white;\\n  margin-bottom: 10px;\\n  cursor: pointer;\\n  padding: 5px 5px 3px;\\n}\\n\\n.task[_ngcontent-%COMP%]:active {\\n  cursor: grabbing;\\n}\\n\\n.title[_ngcontent-%COMP%], .desc[_ngcontent-%COMP%] {\\n  margin-left: 8px;\\n}\\n\\n.title[_ngcontent-%COMP%] {\\n  margin-bottom: 0;\\n}\\n\\n.display[_ngcontent-%COMP%] {\\n  margin-top: 150px;\\n  margin-bottom: 20%;\\n  margin-left: 150px;\\n  display: flex;\\n  gap: 15px;\\n}\\n\\n.placeholder[_ngcontent-%COMP%] {\\n  background: #ccc;\\n  border: dotted 3px #999;\\n  min-height: 60px;\\n  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\\n}\\n\\n.btn-delete[_ngcontent-%COMP%] {\\n  color: red;\\n  margin-left: 90%;\\n  display: none;\\n  margin-top: -25px;\\n  border: none;\\n  background: none;\\n  cursor: pointer;\\n}\\n\\n.task[_ngcontent-%COMP%]:hover   .btn-delete[_ngcontent-%COMP%] {\\n  display: block;\\n}\\n\\n.btn-delete[_ngcontent-%COMP%]:hover {\\n  color: rgba(201, 19, 26, 0.63);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvbWFpbi1sYXlvdXQvYm9hcmQvYm9hcmQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxXQUFBO0VBQ0EsWUFBQTtFQUNBLHlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxNQUFBO0VBQ0EsT0FBQTtFQUNBLFdBQUE7QUFDRjs7QUFFQTtFQUNFLGlCQUFBO0VBQ0EsY0FBQTtFQUNBLGdCQUFBO0VBQ0EsZ0JBQUE7QUFDRjs7QUFHQTtFQUNFLGdCQUFBO0FBQUY7O0FBR0E7RUFDRSxhQUFBO0VBQ0EsOEJBQUE7RUFFRCxpQkFBQTtFQUNDLGtCQUFBO0FBREY7O0FBSUE7RUFDRSxhQUFBO0VBQ0EsOEJBQUE7RUFDQSxVQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtBQURGOztBQUlBO0VBQ0UsWUFBQTtFQUNBLGlCQUFBO0VBQ0EseUJBQUE7RUFDQSxrQkFBQTtBQURGOztBQUtBO0VBQ0UsY0FBQTtFQUNBLGdCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSx1QkFBQTtFQUNBLHFCQUFBO0VBQ0EsbUJBQUE7QUFGRjs7QUFLQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxhQUFBO0FBRkY7O0FBS0E7RUFDRSxlQUFBO0VBQ0EseUJBQUE7QUFGRjs7QUFLQTtFQUNFLFVBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLFFBQUE7RUFDQSxzQkFBQTtFQUNBLHFCQUFBO0VBQ0Esa0JBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0VBQ0EsWUFBQTtBQUZGOztBQUtBO0VBQ0UsZ0JBQUE7QUFGRjs7QUFLQTtFQUNFLGdCQUFBO0VBQ0EsaUJBQUE7QUFGRjs7QUFNQTtFQUNFLGVBQUE7RUFDQSx5QkFBQTtBQUhGOztBQU9BO0VBQ0UsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLGdCQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLGVBQUE7RUFDQSxvQkFBQTtBQUpGOztBQU9BO0VBQ0UsZ0JBQUE7QUFKRjs7QUFRQTtFQUNFLGdCQUFBO0FBTEY7O0FBUUE7RUFFRSxnQkFBQTtBQU5GOztBQVNBO0VBQ0UsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsYUFBQTtFQUNBLFNBQUE7QUFORjs7QUFTQTtFQUNFLGdCQUFBO0VBQ0EsdUJBQUE7RUFDQSxnQkFBQTtFQUNBLHNEQUFBO0FBTkY7O0FBU0E7RUFDRSxVQUFBO0VBQ0EsZ0JBQUE7RUFDQSxhQUFBO0VBQ0EsaUJBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7RUFDQSxlQUFBO0FBTkY7O0FBU0E7RUFDRSxjQUFBO0FBTkY7O0FBVUE7RUFDRSw4QkFBQTtBQVBGIiwic291cmNlc0NvbnRlbnQiOlsiLmhlYWQge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiA2N3B4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTllY2VmO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgei1pbmRleDogLTE7XG59XG5cbi5uYW1lIHtcbiAgZm9udC1zaXplOiAxLjRyZW07XG4gIGNvbG9yOiAjNjc2MDYwO1xuICBtYXJnaW4tbGVmdDogMTAlO1xuICBtYXJnaW4tdG9wOiAyMHB4O1xufVxuXG5cbi5jb2wtbmFtZSB7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG59XG5cbi5jb2wtaGVhZGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXG4gbWFyZ2luLWxlZnQ6IDEwcHg7XG4gIG1hcmdpbi1yaWdodDogMTBweDtcbn1cblxuLnByb2ctaGVhZGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBnYXA6IDE1MHB4O1xuICBtYXJnaW4tbGVmdDogMTBweDtcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xufVxuXG4uY29sdW1uIHtcbiAgd2lkdGg6IDMwMHB4O1xuICBtaW4taGVpZ2h0OiAxMDBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2U5ZWNlZjtcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xuXG59XG5cbi5kb3RzIHtcbiAgY29sb3I6ICNhMzk2OTY7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG4gIHdpZHRoOiAzMHB4O1xuICBoZWlnaHQ6IDMwcHg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi5kb3RzLWNvbnRhaW5lciB7XG4gIHdpZHRoOiAzMHB4O1xuICBoZWlnaHQ6IDMwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgZGlzcGxheTogZmxleDtcbn1cblxuLmRvdHMtY29udGFpbmVyOmhvdmVyIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGVlMmU2O1xufVxuXG4uYWRkLXRhc2sge1xuICB3aWR0aDogMzUlO1xuICBoZWlnaHQ6IDM1cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGdhcDogNXB4O1xuICBtYXJnaW46IDMwcHggMTBweCAxMHB4O1xuICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGJvcmRlcjogbm9uZTtcbn1cblxuLnAtYWRkIHtcbiAgbWFyZ2luLXRvcDogMTBweDtcbn1cblxuLmRlc2Mge1xuICBtYXJnaW4tbGVmdDogNXB4O1xuICBtYXJnaW4tcmlnaHQ6IDVweDtcblxufVxuXG4uYWRkLXRhc2s6aG92ZXIge1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6ICNkZWUyZTY7XG5cbn1cblxuLnRhc2sge1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIHdpZHRoOiAyODBweDtcbiAgbWluLWhlaWdodDogNDBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgcGFkZGluZzogNXB4IDVweCAzcHg7XG59XG5cbi50YXNrOmFjdGl2ZXtcbiAgY3Vyc29yOiBncmFiYmluZztcblxufVxuXG4udGl0bGUsIC5kZXNjIHtcbiAgbWFyZ2luLWxlZnQ6IDhweDtcbn1cblxuLnRpdGxlIHtcblxuICBtYXJnaW4tYm90dG9tOiAwO1xufVxuXG4uZGlzcGxheSB7XG4gIG1hcmdpbi10b3A6IDE1MHB4O1xuICBtYXJnaW4tYm90dG9tOiAyMCU7XG4gIG1hcmdpbi1sZWZ0OiAxNTBweDtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiAxNXB4O1xufVxuXG4ucGxhY2Vob2xkZXIge1xuICBiYWNrZ3JvdW5kOiAjY2NjO1xuICBib3JkZXI6IGRvdHRlZCAzcHggIzk5OTtcbiAgbWluLWhlaWdodDogNjBweDtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDI1MG1zIGN1YmljLWJlemllcigwLCAwLCAwLjIsIDEpO1xufVxuXG4uYnRuLWRlbGV0ZSB7XG4gIGNvbG9yOiByZWQ7XG4gIG1hcmdpbi1sZWZ0OiA5MCU7XG4gIGRpc3BsYXk6IG5vbmU7XG4gIG1hcmdpbi10b3A6IC0yNXB4O1xuICBib3JkZXI6IG5vbmU7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLnRhc2s6aG92ZXIgLmJ0bi1kZWxldGV7XG4gIGRpc3BsYXk6IGJsb2NrO1xuXG59XG5cbi5idG4tZGVsZXRlOmhvdmVyIHtcbiAgY29sb3I6IHJnYmEoMjAxLDE5LDI2LDAuNjMpO1xufVxuXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"AAKA,SAAQA,oBAAoB,QAAO,uDAAuD;AAK1F,OAAO,KAAKC,CAAC,MAAM,QAAQ;AAC3B,SAAqBC,eAAe,EAAEC,iBAAiB,QAAO,wBAAwB;AACtF,SAAQC,sBAAsB,QAAO,yDAAyD;AAC9F,SAAQC,EAAE,EAAEC,OAAO,EAAEC,SAAS,EAAEC,SAAS,QAAO,MAAM;;;;;;;;;;;ICWhDC,0BAAmD;;;;;;IAHrDA,+BAEM;IACJA,4EAAmD;IACnDA,8BAAkB;IAAAA,YAAa;IAAAA,iBAAK;IACpCA,6BAAgB;IAAAA,YAAoB;IAAAA,iBAAI;IAGtCA,kCAAwE;IAA9BA;MAAA;MAAA;MAAA;MAAA,OAASA,4CAAmB;IAAA,EAAC;IAACA,sBAAM;IAAAA,iBAAS;;;;IAJvEA,eAAa;IAAbA,kCAAa;IACfA,eAAoB;IAApBA,yCAAoB;;;;;;;;;IApB1CA,8BAKC;IADIA;MAAA;MAAA;MAAA;MAAA,OAAsBA,6CAAoB;IAAA,EAAC;IAE9CA,8BAAoB;IAEIA,YAAe;IAAAA,iBAAI;IAOzCA,qEAWM;IAENA,iCAAiE;IAA1BA;MAAA;MAAA;MAAA;MAAA,OAASA,wCAAe;IAAA,EAAC;IAC9DA,gCAA6B;IAAAA,mBAAG;IAAAA,iBAAO;IACvCA,6BAAiB;IAAAA,yBAAQ;IAAAA,iBAAI;;;;;IA3B9BA,0FAA0C;IAKrBA,eAAe;IAAfA,oCAAe;IAOFA,eAAyB;IAAzBA,kFAAyB;;;ADDhE,OAAM,MAAOC,cAAc;EAIzBC,YACUC,KAAqB,EACrBC,YAA0B,EAC1BC,cAA8B,EAC9BC,WAAwB,EACzBC,MAAiB;IAJhB,UAAK,GAALJ,KAAK;IACL,iBAAY,GAAZC,YAAY;IACZ,mBAAc,GAAdC,cAAc;IACd,gBAAW,GAAXC,WAAW;IACZ,WAAM,GAANC,MAAM;IAPf,SAAI,GAAG,IAAIV,OAAO,EAAE;IASpB,UAAK,GAAW,EAAY;IAC5B,UAAK,GAAQ,EAAE;IACf,gBAAW,GAAG,IAAI,CAACQ,cAAc,CAACG,WAAW;EAJhB;EAM7BC,QAAQ;IACN,IAAI,CAACN,KAAK,CAACO,MAAM,CAACC,SAAS,CAACD,MAAM,IAAG;MACnCE,OAAO,CAACC,GAAG,CAACH,MAAM,CAAC;MACnB,IAAGA,MAAM,EAAE;QACT,IAAI,CAACI,OAAO,GAAG,CAACJ,MAAM,CAAC,IAAI,CAAC;QAC5B,IAAI,CAACN,YAAY,CAACW,YAAY,CAACL,MAAM,CAAC,IAAI,CAAC,EAAEA,MAAM,CAAC,WAAW,CAAC,CAAC,CAACC,SAAS,CAACK,GAAG,IAAG;UACjF,IAAI,CAACC,KAAK,GAAGD,GAAG;UAChBJ,OAAO,CAACC,GAAG,CAAC,IAAI,CAACI,KAAK,CAAC;QAExB,CAAC,CAAC;QACFL,OAAO,CAACC,GAAG,CAACH,MAAM,CAAC,IAAI,CAAC,CAAC;;IAG7B,CAAC,CAAC;EACJ;EAEAQ,eAAe;IACb,IAAI,CAACC,QAAQ,EAAE;EACjB;EAEA;EACA;EACA;EACA;EACA;EACA;EAEAC,OAAO,CAACC,MAAe;IACvB,MAAMC,SAAS,GAAG,IAAI,CAACf,MAAM,CAACgB,IAAI,CAAChC,oBAAoB,EAAE;MACrDiC,KAAK,EAAE,OAAO;MACdC,IAAI,EAAE;QACJX,OAAO,EAAE,IAAI,CAACA,OAAO;QACrBO,MAAM,EAAEA;;KAEX,CAAC;IAEFC,SAAS,CAACI,WAAW,EAAE,CAACf,SAAS,CAAEgB,IAAW,IAAI;MAChD,IAAIA,IAAI,EAAE;QACR,IAAI,CAACR,QAAQ,EAAE;;IAEnB,CAAC,CAAC;EACJ;EAEMA,QAAQ;IACZ,IAAI,CAACb,WAAW,CAACa,QAAQ,CAAC;MAACL,OAAO,EAAE,IAAI,CAACA;IAAO,CAAC,CAAC,CAACH,SAAS,CAACiB,KAAK,IAAG;MACnE,IAAI,CAACA,KAAK,GAAIpC,CAAC,CAACqC,OAAO,CAACD,KAAK,EAAE,eAAe,CAAC;MAC/ChB,OAAO,CAACC,GAAG,CAACe,KAAK,CAAC;IAEpB,CAAC,CAAC;EACN;EAEEE,IAAI,CAACC,KAAuB,EAAEV,MAAe;IAC3CT,OAAO,CAACC,GAAG,CAACkB,KAAK,CAACC,SAAS,CAAC;IAE5B,IAAID,KAAK,CAACE,iBAAiB,KAAKF,KAAK,CAACC,SAAS,EAAE;MAC/CvC,eAAe,CAACsC,KAAK,CAACC,SAAS,CAACP,IAAI,EAAEM,KAAK,CAACG,aAAa,EAAEH,KAAK,CAACI,YAAY,CAAC;KAE/E,MAAM;MACLzC,iBAAiB,CACfqC,KAAK,CAACE,iBAAiB,CAACR,IAAI,EAC5BM,KAAK,CAACC,SAAS,CAACP,IAAI,EACpBM,KAAK,CAACG,aAAa,EACnBH,KAAK,CAACI,YAAY,CACnB;MACD,MAAMP,KAAK,GAAYG,KAAK,CAACC,SAAS,CAACP,IAAI,CAACW,GAAG,CAAC,CAACT,IAAW,EAAEU,KAAa,KAAI;QAC7E,OAAO;UACL,GAAGV,IAAI;UACPW,UAAU,EAAEjB,MAAM,CAACiB,UAAU;UAC7BC,aAAa,EAAElB,MAAM,CAACmB;SACvB;MACH,CAAC,CAAC;MAEF,IAAI,CAACZ,KAAK,CAACP,MAAM,CAACmB,EAAE,CAAC,GAAGZ,KAAK;MAC7B,MAAMa,WAAW,GAAGb,KAAK,CAACG,KAAK,CAACI,YAAY,CAAC;MAC7CvB,OAAO,CAACC,GAAG,CAAC4B,WAAW,CAAC;MACxB,IAAI,CAACnC,WAAW,CAACoC,UAAU,CAACD,WAAW,CAACD,EAAE,EAAEC,WAAW,CAAC,CAAC9B,SAAS,CAACgB,IAAI,IAAG;QAExEf,OAAO,CAACC,GAAG,CAACc,IAAI,CAAC;QACjB,IAAI,CAACR,QAAQ,EAAE;MACjB,CAAC,CAAC;;EAEN;EAEAwB,UAAU,CAACH,EAAU;IACnB,MAAMlB,SAAS,GAAG,IAAI,CAACf,MAAM,CAACgB,IAAI,CAAC5B,sBAAsB,CAAC;IAE1D2B,SAAS,CAACI,WAAW,EAAE,CACpBkB,IAAI,CACH7C,SAAS,CAAC,IAAI,CAAC8C,IAAI,CAAC,EACpB/C,SAAS,CAAEgD,MAAM,IAAI;MACnB,IAAIA,MAAM,EAAE;QACV,OAAO,IAAI,CAACxC,WAAW,CAACqC,UAAU,CAACH,EAAE,CAAC;;MAExC,OAAO5C,EAAE,CAAC,IAAI,CAAC;IACjB,CAAC,CAAC,CACH,CACAe,SAAS,CAACmC,MAAM,IAAG;MAClB,IAAIA,MAAM,EAAE;QACV,IAAI,CAAC3B,QAAQ,EAAE;;IAEnB,CAAC,CAAC;EACN;EAEA4B,WAAW;IACT,IAAI,CAACF,IAAI,CAACG,IAAI,CAAC,IAAI,CAAC;IACpB,IAAI,CAACH,IAAI,CAACI,QAAQ,EAAE;EACtB;;AAzHWhD,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAAiD;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCnB3BtD,8BAAkB;MACAA,YAAe;MAAAA,iBAAI;MAGrCA,8BAAsC;MACtCA,gEAiCQ;MACRA,iBAAM;;;MAtCYA,eAAe;MAAfA,qCAAe;MAMTA,eAAiB;MAAjBA,2CAAiB","names":["TaskAddEditComponent","_","moveItemInArray","transferArrayItem","ConfirmDeleteComponent","of","Subject","switchMap","takeUntil","i0","BoardComponent","constructor","route","boardService","projectService","taskService","dialog","projectName","ngOnInit","params","subscribe","console","log","boardId","getBoardByID","res","board","ngAfterViewInit","getTasks","addTask","column","dialogRef","open","width","data","afterClosed","task","tasks","groupBy","drop","event","container","previousContainer","previousIndex","currentIndex","map","index","taskStatus","boardColumnId","id","currentTask","updateTask","deleteTask","pipe","sub$","result","ngOnDestroy","next","complete","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/macbookpro/Desktop/GitHubRepo/Task-Manager-with-NgRx/src/app/pages/main-layout/board/board.component.ts","/Users/macbookpro/Desktop/GitHubRepo/Task-Manager-with-NgRx/src/app/pages/main-layout/board/board.component.html"],"sourcesContent":["import {AfterViewInit, Component, OnDestroy, OnInit} from '@angular/core';\nimport {ActivatedRoute} from \"@angular/router\";\nimport {BoardService} from \"../../../core/services/board.service\";\nimport {ProjectService} from \"../../../core/services/project.service\";\nimport {MatDialog} from \"@angular/material/dialog\";\nimport {TaskAddEditComponent} from \"../../../shared/task-add-edit/task-add-edit.component\";\nimport {IBoard, IColumn} from \"../../../core/interfaces\";\nimport {ITask} from \"../../../core/interfaces/task\";\nimport {TaskService} from \"../../../core/services/task.service\";\n\nimport * as _ from 'lodash';\nimport {CdkDragDrop, moveItemInArray, transferArrayItem} from \"@angular/cdk/drag-drop\";\nimport {ConfirmDeleteComponent} from \"../../../shared/confirm-delete/confirm-delete.component\";\nimport {of, Subject, switchMap, takeUntil} from \"rxjs\";\n\n@Component({\n  selector: 'app-board',\n  templateUrl: './board.component.html',\n  styleUrls: ['./board.component.scss']\n})\nexport class BoardComponent implements OnInit, AfterViewInit, OnDestroy{\n  boardId!: number;\n  sub$ = new Subject();\n\n  constructor(\n    private route: ActivatedRoute,\n    private boardService: BoardService,\n    private projectService: ProjectService,\n    private taskService: TaskService,\n    public dialog: MatDialog) {}\n\n  board: IBoard = {} as IBoard;\n  tasks: any = {};\n  projectName = this.projectService.projectName;\n\n  ngOnInit(): void {\n    this.route.params.subscribe(params => {\n      console.log(params)\n      if(params) {\n        this.boardId = +params['id'];\n        this.boardService.getBoardByID(params['id'], params['projectId']).subscribe(res => {\n         this.board = res;\n         console.log(this.board);\n\n        })\n        console.log(params['id'])\n\n      }\n    })\n  }\n\n  ngAfterViewInit() {\n    this.getTasks();\n  }\n\n  // fetchTasks() {\n  //   this.taskService.getTasks({boardId: this.boardId})\n  //     .subscribe(tasks => {\n  //       this.tasks = tasks;\n  //     })\n  // }\n\n  addTask(column: IColumn) {\n  const dialogRef = this.dialog.open(TaskAddEditComponent, {\n      width: '600px',\n      data: {\n        boardId: this.boardId,\n        column: column,\n      }\n    })\n\n    dialogRef.afterClosed().subscribe((task: ITask) => {\n      if (task) {\n        this.getTasks();\n      }\n    })\n  }\n\nprivate getTasks() {\n    this.taskService.getTasks({boardId: this.boardId}).subscribe(tasks => {\n      this.tasks =  _.groupBy(tasks, 'boardColumnId');\n      console.log(tasks);\n\n    })\n}\n\n  drop(event: CdkDragDrop<any>, column: IColumn) {\n    console.log(event.container)\n\n    if (event.previousContainer === event.container) {\n      moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\n\n    } else {\n      transferArrayItem(\n        event.previousContainer.data,\n        event.container.data,\n        event.previousIndex,\n        event.currentIndex,\n      );\n      const tasks: ITask[] = event.container.data.map((task: ITask, index: number) => {\n        return {\n          ...task,\n          taskStatus: column.taskStatus,\n          boardColumnId: column.id,\n        }\n      })\n\n      this.tasks[column.id] = tasks\n      const currentTask = tasks[event.currentIndex]\n      console.log(currentTask)\n      this.taskService.updateTask(currentTask.id, currentTask).subscribe(task => {\n\n        console.log(task)\n        this.getTasks()\n      })\n    }\n  }\n\n  deleteTask(id: number) {\n    const dialogRef = this.dialog.open(ConfirmDeleteComponent);\n\n    dialogRef.afterClosed()\n      .pipe(\n        takeUntil(this.sub$),\n        switchMap((result) => {\n          if (result) {\n            return this.taskService.deleteTask(id);\n          }\n          return of(null);\n        })\n      )\n      .subscribe(result => {\n        if (result) {\n          this.getTasks();\n        }\n      })\n  }\n\n  ngOnDestroy(): void {\n    this.sub$.next(null);\n    this.sub$.complete();\n  }\n}\n\n\n","\n<div class=\"head\">\n  <p class=\"name\">{{projectName}}</p>\n</div>\n\n<div class=\"display\" cdkDropListGroup>\n<div class=\"column-container\"\n     cdkDropList\n     *ngFor=\"let column of board.columns;\"\n     [cdkDropListData]=\"tasks[column.id] || []\"\n     (cdkDropListDropped)=\"drop($event, column)\"\n>\n  <div class=\"column\">\n    <div class=\"col-header\">\n      <p class=\"col-name\">{{column.name}}</p>\n<!--      <button mat-icon-button>-->\n<!--        <mat-icon>more_horiz</mat-icon>-->\n<!--      </button>-->\n    </div>\n\n\n    <div class=\"task\" *ngFor=\"let task of tasks[column.id] || []\"\n         cdkDrag\n         >\n      <div class=\"placeholder\" *cdkDragPlaceholder></div>\n      <h4 class=\"title\">{{task.name}}</h4>\n      <p class=\"desc\">{{task.description}}</p>\n\n\n        <button class=\"material-icons btn-delete\" (click)=\"deleteTask(task.id)\">delete</button>\n\n\n    </div>\n\n    <button type=\"button\" class=\"add-task\" (click)=\"addTask(column)\">\n      <span class=\"material-icons\">add</span>\n      <p class=\"p-add\">Add Task</p>\n    </button>\n  </div>\n  </div>\n</div>\n\n<!--  <div class=\"column\">-->\n<!--    <div class=\"prog-header\">-->\n<!--      <p class=\"col-name\">In Progress</p>-->\n<!--      <button mat-icon-button>-->\n<!--        <mat-icon>more_horiz</mat-icon>-->\n<!--      </button>-->\n<!--    </div>-->\n\n<!--    <div class=\"task\"></div>-->\n\n<!--    <div class=\"add-task\">-->\n<!--      <span class=\"material-icons\">add</span>-->\n<!--      <p>Add Task</p>-->\n<!--    </div>-->\n<!--  </div>-->\n\n<!--  <div class=\"column\">-->\n<!--    <div class=\"col-header\">-->\n<!--      <p class=\"col-name\">Done</p>-->\n<!--      <button mat-icon-button>-->\n<!--        <mat-icon>more_horiz</mat-icon>-->\n<!--      </button>-->\n<!--    </div>-->\n\n<!--    <div class=\"task\"></div>-->\n\n<!--    <div class=\"add-task\">-->\n<!--      <span class=\"material-icons\">add</span>-->\n<!--      <p>Add Task</p>-->\n<!--    </div>-->\n<!-- *ngFor=\"let task of tasks[column.taskStatus]\"\n(dblclick)=\"viewTask(task, column)\"\n </div>-->\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}