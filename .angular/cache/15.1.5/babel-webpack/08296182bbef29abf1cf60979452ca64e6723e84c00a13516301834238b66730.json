{"ast":null,"code":"import { switchMap } from 'rxjs';\nimport { currentProject } from \"../../store/rxProject/project.selectors\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nexport class ProjectInterceptor {\n  constructor(store) {\n    this.store = store;\n  }\n  intercept(request, next) {\n    return this.store.select(currentProject).pipe(switchMap(project => {\n      if (project) {\n        request = request.clone({\n          setHeaders: {\n            'project': project.id.toString()\n          }\n        });\n      }\n      // const project = this.projectFacade.getProject();\n      //\n      //\n      // if (project) {\n      //     return next.handle(\n      //         request.clone({\n      //             setHeaders: {project: String(project.id)}\n      //         })\n      //     );\n      // }\n      return next.handle(request);\n    }));\n  }\n}\nProjectInterceptor.ɵfac = function ProjectInterceptor_Factory(t) {\n  return new (t || ProjectInterceptor)(i0.ɵɵinject(i1.Store));\n};\nProjectInterceptor.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ProjectInterceptor,\n  factory: ProjectInterceptor.ɵfac\n});","map":{"version":3,"mappings":"AAOA,SAAoBA,SAAS,QAAO,MAAM;AAG1C,SAAQC,cAAc,QAAO,yCAAyC;;;AAGtE,OAAM,MAAOC,kBAAkB;EAC3BC,YACqBC,KAA6C;IAA7C,UAAK,GAALA,KAAK;EAE1B;EAEAC,SAAS,CAACC,OAA6B,EAAEC,IAAiB;IACtD,OAAO,IAAI,CAACH,KAAK,CAACI,MAAM,CAACP,cAAc,CAAC,CACnCQ,IAAI,CACDT,SAAS,CAAEU,OAAO,IAAI;MACd,IAAIA,OAAO,EAAE;QACTJ,OAAO,GAAGA,OAAO,CAACK,KAAK,CAAC;UACpBC,UAAU,EAAE;YACR,SAAS,EAAEF,OAAO,CAACG,EAAE,CAACC,QAAQ;;SAErC,CAAC;;MAEN;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEA,OAAOP,IAAI,CAACQ,MAAM,CAACT,OAAO,CAAC;IAC/B,CAAC,CACJ,CACJ;EACT;;AAhCSJ,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;SAAlBA,kBAAkB;EAAAc,SAAlBd,kBAAkB;AAAA","names":["switchMap","currentProject","ProjectInterceptor","constructor","store","intercept","request","next","select","pipe","project","clone","setHeaders","id","toString","handle","factory"],"sourceRoot":"","sources":["/Users/macbookpro/Desktop/GitHubRepo/Task-Manager-with-NgRx/src/app/core/interceptors/project.interceptor.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\nimport {\n    HttpRequest,\n    HttpHandler,\n    HttpEvent,\n    HttpInterceptor,\n} from '@angular/common/http';\nimport {Observable, switchMap} from 'rxjs';\nimport {Store} from \"@ngrx/store\";\nimport {ProjectStateModule} from \"../../store\";\nimport {currentProject} from \"../../store/rxProject/project.selectors\";\n\n@Injectable()\nexport class ProjectInterceptor implements HttpInterceptor {\n    constructor(\n        private readonly store: Store<{ project: ProjectStateModule }>,\n    ) {\n    }\n\n    intercept(request: HttpRequest<unknown>, next: HttpHandler): Observable<HttpEvent<unknown>> {\n        return this.store.select(currentProject)\n            .pipe(\n                switchMap((project) => {\n                        if (project) {\n                            request = request.clone({\n                                setHeaders: {\n                                    'project': project.id.toString()\n                                }\n                            });\n                        }\n                        // const project = this.projectFacade.getProject();\n                        //\n                        //\n                        // if (project) {\n                        //     return next.handle(\n                        //         request.clone({\n                        //             setHeaders: {project: String(project.id)}\n                        //         })\n                        //     );\n                        // }\n\n                        return next.handle(request);\n                    }\n                )\n            )\n    };\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}