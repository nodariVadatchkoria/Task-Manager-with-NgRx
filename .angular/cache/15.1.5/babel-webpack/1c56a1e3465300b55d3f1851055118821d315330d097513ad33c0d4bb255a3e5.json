{"ast":null,"code":"import { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { Subject, takeUntil } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../../core/services/epic.service\";\nimport * as i3 from \"@angular/material/form-field\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/input\";\nimport * as i6 from \"@angular/forms\";\nexport class EpicAddEditComponent {\n  constructor(route, router, epicService) {\n    this.route = route;\n    this.router = router;\n    this.epicService = epicService;\n    this.form = new FormGroup({\n      id: new FormControl(null),\n      name: new FormControl(null, Validators.required),\n      description: new FormControl(null, Validators.required)\n    });\n    this.sub$ = new Subject();\n  }\n  getEpic(id) {\n    this.epicService.getEpic(id).pipe(takeUntil(this.sub$)).subscribe(res => {\n      this.form.patchValue(res);\n    });\n  }\n  ngOnInit() {\n    this.route.params.subscribe(params => {\n      if (params['id']) {\n        this.epicId = +params['id'];\n        this.getEpic(this.epicId);\n      }\n    });\n  }\n  save() {\n    this.form.markAllAsTouched();\n    if (this.form.invalid) {\n      return;\n    }\n    if (this.epicId) {\n      this.epicService.updateEpic(this.form.value).pipe(takeUntil(this.sub$)).subscribe(() => {\n        this.router.navigate(['/application/setting/epics']).then();\n      });\n    } else {\n      this.epicService.createEpic(this.form.value).pipe(takeUntil(this.sub$)).subscribe(() => {\n        this.router.navigate(['/application/setting/epics']).then();\n      });\n    }\n  }\n  ngOnDestroy() {\n    this.sub$.next(null);\n    this.sub$.complete();\n  }\n}\nEpicAddEditComponent.ɵfac = function EpicAddEditComponent_Factory(t) {\n  return new (t || EpicAddEditComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.EpicService));\n};\nEpicAddEditComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EpicAddEditComponent,\n  selectors: [[\"app-epic-add-edit\"]],\n  decls: 13,\n  vars: 1,\n  consts: [[3, \"formGroup\"], [1, \"form-container\"], [\"matInput\", \"\", \"placeholder\", \"Name\", \"formControlName\", \"name\"], [\"matInput\", \"\", \"placeholder\", \"Description\", \"formControlName\", \"description\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"]],\n  template: function EpicAddEditComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"form\", 0)(2, \"div\", 1)(3, \"mat-form-field\")(4, \"mat-label\");\n      i0.ɵɵtext(5, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"input\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"mat-form-field\")(8, \"mat-label\");\n      i0.ɵɵtext(9, \"Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"input\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function EpicAddEditComponent_Template_button_click_11_listener() {\n        return ctx.save();\n      });\n      i0.ɵɵtext(12, \"Save\");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n    }\n  },\n  dependencies: [i3.MatFormField, i3.MatLabel, i4.MatButton, i5.MatInput, i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.FormGroupDirective, i6.FormControlName],\n  styles: [\".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem;margin:20px}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}